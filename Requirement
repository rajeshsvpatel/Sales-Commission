# Sales Commission Web Resources Requirement

# Purpose of This Layout

This document outlines the requirements for the SE-BC-SWC Commission Layout system, which is designed to help the management of sales commission assignments for the SE, BC, and SWC categories. The system allows users to efficiently view and update territory numbers, manage associated usernames, and set override flags for each commission category.

# Panels Included

The commission layout interface is organized into three collapsible panels, each corresponding to a specific category:

*   SE Panel: Has commission assignments related to Specification and Selling roles within the SE category.
*   BC Panel: Has commission assignments for Specification and Selling roles within the BC category.
*   SWC Panel: Has commission assignments for Specification and Selling roles within the SWC category.

# Fields Included in Each Panel

Each panel displays a series of rows corresponding to different commission assignment types. The rows included are:

*   Spec1
*   Sell1
*   Dest1
*   Spec2
*   Sell2
*   Spec 30%

For each row within a panel, the following fields are present:

*   Territory Number Input: Allows users to enter the relevant territory number.
*   Hidden Zip code Field: Has zip code data associated with the territory, not visible to the user.
*   Username: Automatically populated based on the territory and zip code data.
*   Override Checkbox: Enables users to override default commission assignment settings when necessary.

# Lookup Functionality

Each territory row provides a search (ðŸ”) icon. Clicking this icon opens a modal window that enables users to search for ZIP code-based records. The lookup uses Data Tables, providing advanced filtering, search, and pagination functionalities for efficient record choice.

# Territory Validation Logic

When a user manually enters a territory number, the system confirms the entry against preloaded SE, BC, and SWC zip code datasets. If the entered territory number is invalid, an alert message appears, and the system restores the earlier valid value in the field.

# Data Loading Logic

Upon loading the page, the system retrieves commission data relevant to the current sales order using Fetch xml queries. Linked zip code records are also loaded at this stage, enabling the automatic population of usernames and territory fields based on the retrieved data.

# Audit Trail Feature

To ensure transparency and accountability, an audit popup is available that displays a complete record of all field changes. The audit trail includes the following details for each change:

*   Changed By (the user who made the modification)
*   Change Date (timestamp of the modification)
*   Field Name (the specific field that was changed)
*   Old Territory & User (the earlier values)
*   New Territory & User (the updated values)

# Auto Expand/Collapse

Panels are designed to automatically expand if they have any valid commission data. If no valid data is present within a panel, it stays collapsed by default for a streamlined user experience.

# Technologies Used

The following technologies are used in the development and operation of the SE-BC-SWC Commission Layout:

*   HTML and CSS for the user interface layout and design
*   JavaScript and jQuery for dynamic behavior and interactivity
*   Data Tables for enhanced lookup popup functionality
*   Dynamics 365 Xrm.WebApi and FetchXML for data retrieval and manipulation
*   Modal UI components for look-up and audit popups

## Entity Details

*   crmgp\_salescommission
*   new\_zipcode
*   crmgp\_salescommission\_audit\_trail
*   Salesorder

## Entity Relationship -SE

*   Order -> crmgp\_salescommission ->SEDestZipcode -> SEnameid -> system user
*   Order -> crmgp\_salescommission -> SESell1Zipcode-> SEnameid -> system user
*   Order -> crmgp\_salescommission -> SESell2Zipcode-> SEnameid -> system user
*   Order -> crmgp\_salescommission -> SESpec1Zipcode-> SEnameid -> system user
*   Order -> crmgp\_salescommission -> SESpec2Zipcode-> SEnameid -> system user
*   Order -> crmgp\_salescommission -> SESpec30

## Entity Relationship â€“BC

*   Order -> crmgp\_salescommission -> BCDest1Zipcode-> BCnameid -> system user
*   Order -> crmgp\_salescommission -> BCSpec1Zipcode-> BCnameid -> system user
*   Order -> crmgp\_salescommission -> BCSpec2Zipcode-> BCnameid -> system user
*   Order -> crmgp\_salescommission -> BCSell1Zipcode-> BCnameid -> system user
*   Order -> crmgp\_salescommission -> BCSell2Zipcode-> BCnameid -> system user
*   Order -> crmgp\_salescommission -> BCSpec30

## Entity Relationship -SWC

*   Order -> crmgp\_salescommission -> SWCDest1Zipcode-> SWCnameid -> system user
*   Order -> crmgp\_salescommission -> SWCSell1Zipcode-> SWCnameid -> system user
*   Order -> crmgp\_salescommission -> SWCSell2Zipcode-> SWCnameid -> system user
*   Order -> crmgp\_salescommission -> SWCSpec1Zipcode-> SWCnameid -> system user
*   Order -> crmgp\_salescommission -> SWCSpec2Zipcode-> SWCnameid -> system user
*   Order -> crmgp\_salescommission -> SWCSpec30

## Entity Relationship - crmgp\_salescommission\_audit\_trail

*   SalesOrder -> crmgp\_salescommission\_audit\_trail
